<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <!--1.导入vue.js-->
  <script src="https://cdn.jsdelivr.net/npm/vue@2.5.21/dist/vue.min.js"></script>
</head>

<!--自定义事件分发-->
<body>
<div id="app">
  <mylist>
    <!--使用自定义的slot_title-->
    <slot_title slot="slot_title" v-bind:title="title"></slot_title>
    <!--使用自定义的slot_itms ：
    需要为slot_items对应的item、index、remove赋值(这边的v-on:remove为this.$emit(）定义的事件名)
    -->
    <slot_items slot="slot_items"
                v-for="(item, index) in arr"
                v-bind:item = "item"
                v-bind:index = "index"
                v-on:remove="removeItem(index)"
    ></slot_items>
  </mylist>
</div>

<script>
  //slot 插槽 这个组件要定义在前面，不然出不来数据
  <!--自定义组件、模板-->
  Vue.component("mylist",{
    template:
      '<div>' +
      //使用插槽：结合模板使用
      '<slot name="slot_title"></slot>'+
      '<ul>' +
      '<slot name="slot_items"></slot>'+
      '</ul>'+
      '</div>'
  });

  Vue.component("slot_title",{
    props: ['title'],
    template: '<div>{{title}}</div>'
  });

  Vue.component("slot_items",{
    props: ['item', 'index'],
    //为每个元素添加删除按钮
    template: '<div>{{index}} - {{item}}  <button style="margin: 5px" v-on:click="removeFunc">删除</button></div>',
    methods: {
      removeFunc: function(index){
        // this.$emit('事件',参数) 自定义事件分发（远程调用方法）
        this.$emit('remove', index)
      }
    }
  });

  var v = new Vue({
    el: "#app",
    data:{
      title: "chris-title",
      arr: ['aaaa', 'bbbb', 'cccc']
    },
    methods:{
      removeItem: function(index){
        // 一次删除arr数组的一个元素
        this.arr.splice(index, 1)
        //浏览器控制台打印信息
        console.log("成功删除了: " + this.arr[index])
      }
    }
  });

</script>
</body>
</html>
